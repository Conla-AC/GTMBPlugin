# 指令批处理

该文档将详细介绍如何使用指令批处理用户界面（UI）。

---

### **功能概述**
该UI允许玩家一次性批量执行多条指令，支持两种执行模式：
1. **直接输入指令模式**：在大框中输入指令，点击“执行”按钮逐条执行。
2. **文件路径模式**：在小框中输入本地文件路径，点击“执行（路径模式）”按钮读取文件中指令并执行。

---

### **打开方式**
1. 在**聊天栏**输入以下命令：
   ```
   python.cmdbatch
   ```
2. 按下回车键后UI会自动打开。

---

### **权限要求**
- **管理员权限**：玩家必须具备管理员权限才能打开此UI。
- 如果在UI打开后，管理员权限被撤销，所有按钮（除右上角的关闭按钮）将失效。

---

### **界面说明**
1. **大框（指令输入框）**：
   - 用于直接输入批处理指令。
   - 一行一条指令，按顺序执行。
   - 如遇到语法错误，此指令将被跳过，继续执行后续指令。
2. **小框（路径输入框）**：
   - 用于输入本地指令文件的路径。
   - 文件需为纯文本格式，**路径中不能包含中文和特殊字符**。
3. **按钮功能**：
   - **“执行”按钮**：执行大框中的指令。
   - **“执行（路径模式）”按钮**：读取小框中的文件路径，执行文件中的指令。
   - **右上角关闭按钮**或按下键盘**ESC键**：退出界面。

---

### **使用步骤**

#### **模式一：直接输入指令模式**
1. 在大框中逐行输入指令。
   - 示例：
     ```
     give @s apple
     kill @a
     ```
2. 点击左下方的**“执行”按钮**。
3. 指令将依次执行，若某条指令有语法错误将被跳过，不影响后续指令。

#### **模式二：文件路径模式**
1. 创建一个指令文件，按行输入指令。
   - 示例文件内容（保存为`myfile.mcfunction`）：
     ```
     setblock ~ ~ ~ stone
     give @a diamond
     ```
2. 将文件保存在本地路径（确保文件路径中不含中文和特殊字符）。
   - 示例路径：`E:\mccmd\myfile.mcfunction`
3. 在小框中输入文件路径。
4. 点击右下方的**“执行（路径模式）”按钮**。
5. 程序会读取文件中的指令并逐行执行。

---

### **退出界面**
- 点击**右上角的关闭按钮**。
- 或按下键盘上的**ESC键**。

**注意**：退出界面不影响批处理指令的继续执行。

---

### **使用注意事项**
1. **权限限制**：
   - 无管理员权限无法打开此UI。
   - 如果在UI打开后权限被撤销，除关闭按钮外所有功能均不可用。
2. **路径格式要求**：
   - 文件路径中不能包含中文和特殊字符。
   - 确保路径文件存在且格式正确。
3. **指令执行顺序**：
   - 指令按行顺序执行，语法错误的指令会被跳过。
4. **执行效率**：
   - 批处理指令较多时可能会导致游戏卡顿，请耐心等待。

---

### **常见问题**
1. **Q：为何文件路径模式无法执行？**
   - 确保文件路径中无中文或特殊字符。
   - 确保文件存在且内容格式正确。
2. **Q：为何按钮失效？**
   - 检查是否失去管理员权限。
   - 此时只能使用关闭按钮或ESC键退出界面。
3. **Q：退出界面后指令是否继续执行？**
   - 是的，退出界面不会中断批处理的执行。

